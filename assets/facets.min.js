!function(t){"use strict";var e=t(window),i=t(document),a=t("html"),n=t("body"),s=(window.T4Sstrings,window.T4Sconfigs),r=(T4Srequest.page_type,T4Sroutes.search_url,"not4s"),o=function(){window.History;var o,l,c,d=t("[data-main-filters-links]"),h="collection"==T4Srequest.page_type||"search"==T4Srequest.page_type,p="content--loading",f="is--loading",u="is--listview",m="is--active",v={root:null,rootMargin:"0px",threshold:0};function g(e){this.container=e,this.$container=t(e),this.options=JSON.parse(this.$container.attr("data-ntajax-options")),this.main=this.options.id||"",this.typeAjax=this.options.type||"LmDefault",this.updateURLPrev=this.options.updateURLPrev||!1,this.isProduct=this.options.isProduct||!1,this.$section=t(`#shopify-section-${this.main}`),this.filter=this.options.typeFilters,this.filterData=[],this.queryParams={},this.disableScroll=this.options.disableScroll||!1,this.scrollOffset=this.options.scrollOffset||100,this.isReloadFilter=!0,this.nouisliderLoaded=!1,this.isbtnLoadMore=!0,this.sort_by=this.options.sort_by,this.setupEventListeners(),this.onFirstLoadFacets()}return g.prototype=Object.assign({},g.prototype,{destroyEventListeners:function(){self.$container.off("click.ntajax"),self.$filter.off("click.ntajax"),e.off("popstate.ntajax")},closeDrawer:function(t){t.closest(".t4s-drawer").find("[data-drawer-close]").trigger("click.drawer")},setupEventListenersSidebarFacets:function(){var e=this;e.$filterSidebar.on("click.ntajax","[data-sidebar-links] a",function(i){i.preventDefault(),e.isReloadFilter=!0;const a=t(this);e.ntAjaxStart(),e.closeDrawer(a),e.loadPageContent(a.attr("href")),e.updateURLHash(a,!0)});var i=e.$filterSidebar.find(".t4s-price_slider_wrapper");0!=i.length&&$script(s.script8,function(){e.nouisliderLoaded=!0,e.initPriceRange(i)})},setupEventListenersFacets:function(){var e=this;e.$filter=t("#shopify-section-"+e.filter),e.removeDataDelay(),e.$filter.on("click.ntajax","[data-filter-links] a",function(i){i.preventDefault(),e.isReloadFilter=!0;const a=t(this);e.ntAjaxStart(),e.closeDrawer(a),e.loadPageContent(a.attr("href")),e.updateURLHash(a,!0)});var i=e.$filter.find(".t4s-price_slider_wrapper");0!=i.length&&$script(s.script8,function(){e.nouisliderLoaded=!0,e.initPriceRange(i)})},filterActionLink:function(t,e=!1){this.isReloadFilter=!0,this.ntAjaxStart(e),this.loadPageContent(t.attr("href")),this.updateURLHash(t,!0)},setupEventListeners:function(){var i=this;i.$container.on("click.ntajax",".t4s-active-filters a",function(e){e.preventDefault(),i.filterActionLink(t(this))}),d.find("[data-main-filters-link]").length>0&&d.on("click.ntajax","[data-main-filters-link]",function(e){e.preventDefault();let a=t(this);i.filterActionLink(a,!1),a.closest("[data-main-filters-links]").find(".is--selected").removeClass("is--selected"),a.addClass("is--selected")}),i.$section.on("click","[data-filter-sortby] a, [data-sortby-item]",function(e){e.preventDefault(),i.isReloadFilter=i.sort_by!=i.current_sort_by,i.isReloadFilter&&(i.sort_by=i.current_sort_by);const a=t(this),n=i.getUrlSortby(a);i.ntAjaxStart(),i.loadPageContent(n),i.updateURLHash(t(this),!1,n)}),i.$container.on("click","[data-ntjax-wrap] a, [data-ntjax-link]",function(e){e.preventDefault(),i.isReloadFilter=!1;const a=t(this);i.ntAjaxStart(),i.loadPageContent(a.attr("href")),i.updateURLHash(a,!0)}),i.$section.on("click","[data-load-more]",function(e){e.preventDefault(),i.isReloadFilter=!1;const a=t(this);a.addClass(f),l=`${a.attr("href")}&section_id=${i.main}`,i.isbtnLoadMore=!t(this).is("[data-is-prev]"),i.renderSectionFromFetch(l,i.main,function(t,e){i[i.typeAjax](t),a.removeClass(f)}),(i.isbtnLoadMore||i.updateURLPrev)&&i.updateURLHash(a,!0)}),i.clickOnScrollButton(),e.on("popstate.ntajax",function(t){try{const e=t.originalEvent.state;if(!e.path)return;t.preventDefault(),t.stopImmediatePropagation(),i.isReloadFilter=e.updateFilter,i.ntAjaxStart(),i.loadPageContent(e.path)}catch(t){}}),i.layoutSwitching()},loadPageContent:function(e){var i=this;i.renderSection(e,i.main,function(a,s,r,o){if(o){var l=(new DOMParser).parseFromString(a,"text/html").querySelector("[data-ntajax-container]").innerHTML;i.filterData=[...i.filterData,{DomHTMl:l,filterUrl:r}]}else l=a;i.$container.html(l),i.updateListing(),i.isProduct&&T4SThemeSP.reinitProductGridItem(),T4SThemeSP.PopupMFP(),n.trigger("t4s:hideTooltip"),n.trigger("currency:update"),"AjaxIsotope"!=i.typeAjax&&"LmIsotope"!=i.typeAjax||T4SThemeSP.Isotopet4s.init(i.$container.find(".isotopet4s")),i.clickOnScrollButton(),i.$filter&&i.$filter.length>0&&!i.isReloadFilter&&i.removeDataDelay(),i.$filter&&i.isReloadFilter&&i.renderSection(e,i.filter,function(e,a,n,s){if(s){var r=(new DOMParser).parseFromString(e,"text/html").querySelector("[data-filter-links]").innerHTML;i.filterData=[...i.filterData,{DomHTMl:r,filterUrl:n}]}else r=e;i.$filter.find("[data-filter-links]").html(r),i.$filterSidebar.html(t(r).find("#FacetFiltersForm").parent().html()),i.nouisliderLoaded&&(i.initPriceRange(i.$filter.find(".t4s-price_slider_wrapper")),i.initPriceRange(i.$filterSidebar.find(".t4s-price_slider_wrapper"))),i.removeDataDelay()})})},renderSection:function(t,e,i){o=t.indexOf("?")>-1?"&":"/?",l=t+o+"section_id="+e,c=(t=>t.filterUrl===l),this.filterData.some(c)?this.renderSectionFromCache(l,c,e,i):this.renderSectionFromFetch(l,e,i)},renderSectionFromFetch:function(t,e,i){fetch(t,{method:"GET",headers:{"Cache-Control":"no-cache"}}).then(t=>t.text()).then(a=>{i(a,e,t,!0,!0),this.ntAjaxEnd()}).catch(t=>{this.ntAjaxEnd()})},renderSectionFromCache:function(t,e,i,a){a(this.filterData.find(e).DomHTMl,i,t,!1,!0),this.ntAjaxEnd()},debounce:function(t,e){let i;return(...a)=>{clearTimeout(i),i=setTimeout(()=>t.apply(this,a),e)}},updateURLHash:function(t,e=!0,i){i=i||t.attr("href");var a=t.text();history.pushState({path:i,updateFilter:e},a,i)},initPriceRange:function(e){var i=this,s=e.find(".t4s-price_slider_amount"),r=s.data("minstr"),o=s.data("maxstr"),l=s.find(".t4s-min_price"),c=s.find(".t4s-max_price"),d=(s.find(".t4s-url_price").val(),l.data("min")),h=c.data("max"),p=s.data("step")||1,f=l.val(),u=c.val(),m=a.hasClass("rtl_true")?"rtl":"ltr";s.find("input.t4s-url_price, input.t4s-min_price, input.t4s-max_price").hide(),e.find(".t4s-price_slider, .t4s-price_label ,.t4s-price_slider_btn").show();var v=e.find(".t4s-price_steps_slider:not(.noUi-target)"),g=v[0],S=["span.t4s-from","span.t4s-to"],y=[".t4s-min_price",".t4s-max_price"];v.length<1||(noUiSlider.create(g,{start:[f,u],connect:!0,step:p,direction:m,range:{min:d,max:h}}),g.noUiSlider.on("update",function(t,i){var a=parseInt(t[i]);e.find(S[i]).html(T4SThemeSP.Currency.formatMoney(a)),s.find(y[i]).val(T4SThemeSP.Currency.formatMoney(a,"{{amount}}").replaceAll(",","")),n.trigger("currency:update")}),e.on("click",".t4s-price_slider_btn",function(e){f=l.val(),u=c.val();var a=i.getUrlPriceFilter(r,o,f,u);i.ntAjaxStart(),i.loadPageContent(a),i.updateURLHash(t(this),!0,a),i.closeDrawer(t(this))}))},_defineProperty:function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t},layoutSwitching:function(i,a,n){var s=this,r=s.$section.find("[data-layout-switch]"),o=r.find(".is--mobile .is--active").data("col"),l=r.find(".is--tablet .is--active").data("col"),c=r.find(".is--desktop .is--active").data("col"),d=T4Sroutes.cart_update_url;0!=r.length&&(s.$section.on("click","[data-layout-switch] button",function(e){e.preventDefault();var i=t(this),a=i.data("breakpoint"),n=i.data("col"),r=s.$container.find(".t4s-products");i.parent().find("."+m).removeClass(m),i.addClass(m),"list_t4s"==n?r.addClass(u+" on--list-"+a):r.removeClass(u+" on--list-"+a),"mobile"==a?(r.removeClass("t4s-row-cols-"+o).addClass("t4s-row-cols-"+n),o=n):"tablet"==a?(r.removeClass("t4s-row-cols-md-"+l).addClass("t4s-row-cols-md-"+n),l=n):(r.removeClass("t4s-row-cols-lg-"+c).addClass("t4s-row-cols-lg-"+n),c=n),r.hasClass("isotopet4s")&&r.isotopet4s("layout"),lazySizesT4.autoSizer.checkElems(),isStorageSpdLocal&&localStorage.setItem("collection_items_per_row_"+a,c),fetch(d+".js",{body:JSON.stringify({attributes:s._defineProperty({},"collection_items_per_row",o+"."+l+"."+c)}),credentials:"same-origin",method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}})}),e.on("resize",function(){var t=r.find(".is--active:visible").data("breakpoint"),e=r.find(".t4s-products");e.hasClass("on--list-"+t)?e.addClass(u):e.removeClass(u)}))},updateListing:function(){if(0!=this.$section.find(".t4s_icon_viewlist").length){var t=window.innerWidth,e=this.$section.find("[data-layout-switch]").attr("data-items").split("."),i=this.$container.find(".t4s-products"),a="is--listview on--list-",n=a;t<768&&"list_t4s"==e[0]?a+="mobile":t<1025&&"list_t4s"==e[1]?a+="tablet":"list_t4s"==e[2]&&(a+="desktop"),a!=n&&i.addClass(a)}},initParams:function(){if(location.search.length){var t,e=location.search.substr(1).split("&");this.queryParams={};for(var i=0;i<e.length;i++)(t=e[i].split("=")).length&&(this.queryParams[decodeURIComponent(t[0])]=t[1])}else this.queryParams={}},getUrlSortby:function(t){var e=t.data("value"),i=window.location.pathname;return this.current_sort_by=e,this.initParams(),this.queryParams.page&&delete this.queryParams.page,this.queryParams.sort_by=e,"/"==i.substr(i.length-1)&&(i=i.slice(0,-1)),`${i}/?${unescape(new URLSearchParams(this.queryParams).toString())}`},getUrlPriceFilter:function(t,e,i,a){var n=window.location.pathname;return this.initParams(),this.queryParams.page&&delete this.queryParams.page,this.queryParams[t]=i,this.queryParams[e]=a,"/"==n.substr(n.length-1)&&(n=n.slice(0,-1)),`${n}/?${decodeURIComponent(new URLSearchParams(this.queryParams).toString())}`},onFirstLoadFacets:function(){if(IsDesignMode){var e=this;e.filter="facets",e.setupEventListenersFacets(),e.filter="facets_tags",e.setupEventListenersFacets(),i.on("shopify:section:load",function(i){var a=i.detail.sectionId;t("#shopify-section-"+a).hasClass("t4s-section-filter")&&(e.filter=a,e.setupEventListenersFacets())})}this.onFirstLoadFilterSidebar(),!IsDesignMode&&h&&this.$container.is("[data-has-filters]")&&this.onFirstFetchFilter()},onFirstLoadFilterSidebar:function(){var e=this;e.$filterSidebar=t("[data-replace-filter]"),"not4s"!=r&&e.$filterSidebar.length>0?(e.$filterSidebar.html(r),r="",e.setupEventListenersSidebarFacets()):i.on("sidebar:updated",function(){e.$filterSidebar=t("[data-replace-filter]"),0!=e.$filterSidebar.length&&e.onFirstFetchFilter(!1)})},onFirstFetchFilter:function(e=!0){var i=this,a="",n=window.location.pathname;i.initParams(),i.queryParams.page&&delete i.queryParams.page;const s=new URLSearchParams(i.queryParams).toString();s.length>0&&(a="&"),"/"==n.substr(n.length-1)&&(n=n.slice(0,-1)),fetch(`${n}/?${s}${a}section_id=${i.filter}`,{method:"GET",headers:{"Cache-Control":"no-cache"}}).then(t=>t.text()).then(a=>{e&&T4SThemeSP.$appendComponent.after(a),r=t(a).find("#FacetFiltersForm").parent().html(),i.$filterSidebar.html(r),e||(r="",i.setupEventListenersSidebarFacets()),i.setupEventListenersFacets()}).catch(t=>{})},ntAjaxStart:function(t=!1){t||this.scrollToTop(),n.addClass(p),this.$container.addClass(f)},ntAjaxEnd:function(){n.removeClass(p),this.$container.removeClass(f)},removeDataDelay:function(){t('[data-drawer-options*="#t4s-filter-hidden"]').removeAttr("data-drawer-delay")},scrollToTop:function(){this.disableScroll||t("html, body").stop().animate({scrollTop:this.$container.offset().top-this.scrollOffset},400)},handleIntersect:function(e,i){e.forEach(function(e){let a=e.target;e.isIntersecting&&!a.classList.contains(f)?t(a).trigger("click"):null===a.offsetParent&&i.unobserve(a)})},clickOnScrollButton:function(){var e=this,i=e.$container.find("[data-load-onscroll]:not(.t4s-lm-onscroll-init)");0!=i.length&&window.IntersectionObserver&&i.each(function(i){let a;(a=new IntersectionObserver(e.handleIntersect,v)).observe(this),t(this).addClass("t4s-lm-onscroll-init")})},LmDefault:function(e){var i=t(e),a=i.find("[data-contentlm-replace]").html(),n=this.isbtnLoadMore?i.find("[data-wrap-lm]"):i.find("[data-wrap-lm-prev]"),s=this.$section.find("[data-contentlm-replace]");this.isbtnLoadMore?s.append(a):s.prepend(a),this.initLoamoreUpdate(n)},LmIsotope:function(e){var i=t(e),a=i.find("[data-contentlm-replace]").html(),n=this.isbtnLoadMore?i.find("[data-wrap-lm]"):i.find("[data-wrap-lm-prev]"),s=this.$section.find("[data-contentlm-replace]");a=t(a),this.isbtnLoadMore?s.append(a).isotopet4s("appended",a):s.prepend(a).isotopet4s("prepended",a),this.initLoamoreUpdate(n)},initLoamoreUpdate:function(t){t.length>0&&this.isbtnLoadMore?this.$section.find("[data-wrap-lm]").html(t.html()):this.isbtnLoadMore?this.$section.find("[data-wrap-lm]").hide():t.length>0&&!this.isbtnLoadMore?this.$section.find("[data-wrap-lm-prev]").html(t.html()):this.isbtnLoadMore||this.$section.find("[data-wrap-lm-prev]").hide(),this.isProduct&&T4SThemeSP.reinitProductGridItem(),n.trigger("t4s:hideTooltip"),n.trigger("currency:update"),this.isbtnLoadMore&&this.clickOnScrollButton()}}),g}();T4SThemeSP.initFacets=void t(".t4s-section-main [data-ntajax-options]:not(is--enabled)").each(function(){t(this).addClass("is--enabled"),this.Facets=new o(this)})}(jQuery_T4NT);